pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
--the alop's adventure--
--by alop's team--

function _init()
	create_player()
end

function _update()
	player_movement()
	player_change_spr()
	update_camera()
end

function _draw()
	draw_map()
	draw_player()
	draw_ui()
end
-->8
--player--

function create_player()
	p={
	x=6,y=4,
	sprite=83,
	keys=0
	}
end

function player_change_spr()
	if (btn(⬅️)) p.sprite=80
	if (btn(➡️)) p.sprite=83
end

function player_movement()
	newx=p.x
	newy=p.y
	if (btnp(➡️)) newx+=1
	if (btnp(⬅️)) newx-=1
	if (btnp(⬇️)) newy+=1
	if (btnp(⬆️)) newy-=1
	
	interact(newx,newy)	
	
	if not check_flag(0,newx,newy) then
	p.x=newx
	p.y=newy
	end	
end

function interact(x,y)
	if check_flag(1,x,y) then
		pick_up_key(x,y)
	elseif check_flag(2,x,y)
	and p.keys>0 then
		open_door1(x,y) 
	end
end

function draw_player()	
	spr(p.sprite,p.x*8,p.y*8)
end
	
-->8
--map--

function draw_map()
	map(0,0,0,0,128,64)
end

function update_camera()
	camx=flr(p.x/16)*16
	camy=flr(p.y/16)*16
	camera(camx*8,camy*8)
end

function check_flag(flag,x,y)
	local sprite=mget(x,y)
	return fget(sprite,flag)
end

function next_tile(x,y)
	sprite=mget(x,y)
	mset(x,y,sprite+1)
end

function pick_up_key(x,y)
	next_tile(x,y)
	p.keys+=1
end

function open_door1(x,y)
	next_tile(x,y)
	p.keys-=1
end
-->8
--enemies--
-->8
--ui--

function draw_ui()
	camera(0,0)
	spr(33,2,2)
	print("X"..p.keys,10,2,7)
end
__gfx__
00000000666666665656565666666666666666666666655555555555666666666666666656511565555115555656565611111111000000000000000000000000
00000000666666565656565666666656666666566666656558888585666666666666666655511555565115655556565611111111000000000000000000000000
00700700666666665656565666666866666666666666655558558585666666566666666656511565555115555656565611171111000000000000000000000000
0007700066666666565656566aaaa886666666666666656558558585666666666666666655511555565115655556565611111111000000000000000000000000
0007700066666666555555554a444844444444446666655558888585666666666666666656511565555115555655555511111111000000000000000000000000
00700700666666666666666644444444444444446566656558888585666666666666666655511555565115655556666655511555000000000000000000000000
00000000656666666656666662222226654664666666655558888585666666666666666656511565555115555656656656511565000000000000000000000000
00000000666666666666666666666666666666666666656555555555666666666666666655511555565115655556666655511555000000000000000000000000
00000000666666661111111111111111111111111111155511111555111115555651111156511111565111115555555511111111111111115551111111111555
0000000065666666171111111111171111111111111115651117156511111565555111a155511111555111116565656511111111111111115651111111111565
00000000666666661111111111111111111111111a11155511111555111115555651111156511111565111115555555511171111111711115557111111171555
0000000066666666111111a111111111111111111111156511111565111115655551111155511711555111116565656511111111111111115651111111111565
00000000666666661111111111111111111111111111155511111555111115555651111156511111565111116565656511111111111111115651111111111565
00000000666666665555555555555555555555551111156511111565111115655551711155511111555111116565656511111555555111115651111111111565
00000000666666566565656565656565656565651111155517111555111115555651111156511111565111116565656511111565565111115651111111111565
00000000666666665555555555555555555555551111156511111565111115655551111155511111555111115555555511111555555111115551111111111555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088aaaa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000008000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0555500000000000000b00b00b00b00000e1110000111e000000566006650000005566000066550006667000000766605533bb0000bb33550600050660500060
555555000000000000bbbb0000bbbb0000eeb000000bee00000525e66e5250000525e6e00e6e52506677770000777766358888b00b8888530666660660666660
5f3ff3500000333000b8b800008b8b0000ee220000222200a50535b66b53505a9999aaaaaaaa99996655557007555566381111b00b111183061ff106601ff160
55ffff500033333300bbbb0000bbbb000eeeeb0000beeee0050222eeee22205005556660066655506677577557757766338818b00b81883306ffff0660ffff60
55888850000030300011b103b01b1100e02ee222222ee20e05055566665550500005660000665000667757755775776633b818b00b818b330033330660333300
084444000000f3330b1111300b11113000eeeb2002beee00055595a66a59555000505060060505000067770550777600005666dddd6665000f333345543333f0
085565000000ff4fb0448400004844030eeee220022eeee00000556006550000050050066005005006556575575655600544a460064a44500fbbbb0550bbbbf0
08400400000fff4f00100100001001000bbbbb3003bbbbb0000555666655500000500600006005000060070000700600005006000060050000f0040660400f00
00055550000000000555500005555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00555555000000005555550055555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
053ff3f5033300005f3ff3505f3ff350000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05ffff553333330055ffff5055ffff50000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05888855030300005588885055888850000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00444480333f00000844440008444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00565580f4ff00000855650008556500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00400480f4fff0000400004008400400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09999900044444000444440004444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99ffff0044ffff0004ffff0004ffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
994ff490443ff340041ff10004cffc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99ffff9044ffff400444440004444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
99777790442222400011110000777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
9f7777f00f2222f00f1111f00f7777f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
90111100002222000044440000444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010010000d00d000040040000400400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000051101010111010101010101010101010
10101010101010101010101010101091000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061101010111010101010101010111010
10101010101110101010101010101091000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000051101010101010101010101010101110
101010101010101010101010101010a1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071101010101110101010101010101010
11101010111010101010101010101091000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061101010101011101010101010101010
10111010101010101010101010101081000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000051101010101010111010101010101010
10101111101010101010101010101091000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071101010101010101011101010101010
101011111010101010101010101010a1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061101010101010101010101111111111
10111011111010101010101010101081000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000051101010101010101010101010101110
10101010101110101010101010101091000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061101010101010101010101010101010
101010101010111010101010101010a1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071101010101010101010101010101010
10101010101011101010101010101091000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000051101010101010101010101010101010
10101010101010101010101010101081000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000071101010101010101010101010101010
101010101010101010101010101010a1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000051101010101010101010101010101010
10101010101010101010101010101091000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000061101010101010101010101010101010
10101010101010101010101010101081000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1
b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1e1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000301010500000101000100000000000101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000100000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1c12131412131414131214131412130c0c13121412141213141214131214121214131214121412131414121413141214121412131214121413141312141214131412141314131213141314131214131412121413121413131214131214121313141214131213131412131413121414131314121314121412131414131214131d
1702020202020202020202020202020909020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020219
1501010101010101010101010101010a0901010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101011a
1601010101010301010101010101010a0901010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101011a
1501010101010101010101010101010a09010101010101010111110101010101010101010101010101010101010101010101010101010101010101010101010101111111010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101111111110101010118
1701010101010101010101010101010a09010101010101010111110101010101010101111111111111111101010101010101010101010101010101010101010111010101010101010101010101010101010101010111010101010101010101010101010101010101010101010101010101010101010101010101011111010119
170101010111111111010101010101090911010111011111111111111101010101011111010101010101111111010101010101010101010101010101010101110101010101010101010101010111111111011111111101111111110101010101010101010101010101010101010101111111011111010101010101011101011a
1601010111110101010111011111110611010101010101010101010101010101110101010101010101010101111101010101010101010101010101010111010101010101010101010101010111110101111101111101010101010111011111111101010101010101010101010111111101111101110101010101010111010119
1701010111010101010101011111010a0911010101010101010101010101011101010101010101010101010101010101010101010101010101010101011101010101010101010101010101110101111111010111010101010101010111110111111111011111011111111101110101010101110111010101010101111101011a
1601010111010101010101011101010a09111101010101011101010101111101010101010101010101010101010101010101010101010101010101010101010101010101010101010101011111111101010101111111010101011111110101010111111111010101010101010101010101010111110101010101011101010119
1501010111010101010101111101010a09011101010101111111111111110101010101010101010101010101010101010101010101010101010101010101010101010111111101010101010101010101010101010101110111110101010101010101010111111101010101010101010101011111110101011111010101010118
1701010111011101010111010101010a0901011101010111010101010101010101010101010101010101010101010101010101010101010101011101010101010101110101010101010101010101010101010101010101010101010101010101010101010101110101010101010101010101010111111111010101010101011a
1601010101010111111101010101010a09010111110111110101010101010101010101010101010101010101010101010101010101010101011101010101010101110101010101010101010101010101010101010101010101010101010101010101010101011111010101010101010101010101010101010101010101010118
1701010101010101010101010101010a09010101111111010101010101010101010101010101010101010101010101010101010101010101010101010101010101110101010101010101010101010101010101010101010101010101010101010101010101011101010101010101010101010101010101010101010101010118
1501010101010101010101010101010a09010101011111110101010101010101010101010101010101010101010101010101010101010101110101010101010101110101010111010101010101010101010101010101010101010101010101010101010101010111010101010101010101010101010101010101010101010119
1f1b1b1b1b1b1b1b1b1b1b1b1b1b1b0a0a01010101011111010101010101011b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b0101010101010111010101010101010111010101110101010101010101011b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b01010101011101110101010101011b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1b1e
0000000000000000000000000000000017010101010101111101010101010118000000000000000000000000000000001501010101010101010101010101010101110101010101010101010101010119000000000000000000000000000000001701010101011101110101010101011a00000000000000000000000000000000
000000000000000000000000000000001601010101010101011101010101011a000000000000000000000000000000001701010101010101110101010101010101110101010101010101010101010118000000000000000000000000000000001501010101010101110101010101011900000000000000000000000000000000
000000000000000000000000000000001601010101010111011101010101011800000000000000000000000000000000160101010101010101010101010101010101110101010101010101010101011a000000000000000000000000000000001601010101011101011101010101011800000000000000000000000000000000
0000000000000000000000000000000017010101010101110101110101010119000000000000000000000000000000001501010101010101110101010101010111010111110101010101010101010119000000000000000000000000000000001501010101011101011101010101011a00000000000000000000000000000000
000000000000000000000000000000001501010101010111010111010101011a000000000000000000000000000000001501010101010101110101011101010101010101111101010101010101010119000000000000000000000000000000001601010101010101010111010101011800000000000000000000000000000000
0000000000000000000000000000000016010101010101110101110101010118000000000000000000000000000000001701010101010101111111010101010101010101010101010101010101010118000000000000000000000000000000001701010101011101010101010101011900000000000000000000000000000000
000000000000000000000000000000001601010101010111011111010101011a00000000000000000000000000000000160101010101010101010101010101010101010101010101010101010101011a000000000000000000000000000000001501010101011101010111010101011a00000000000000000000000000000000
0000000000000000000000000000000017010101010101110111010101010119000000000000000000000000000000001501010101010101010101010101010101010111111101010101010101010119000000000000000000000000000000001601010101011101010101010101011800000000000000000000000000000000
000000000000000000000000000000001501010101010111011101010101011800000000000000000000000000000000170101010101010101010101010101011111010101010101010101010101011a000000000000000000000000000000001701010101011101011101010101011900000000000000000000000000000000
000000000000000000000000000000001601010101010101111101010101011a000000000000000000000000000000001501010101010101010101010101010101010101010101010101010101010118000000000000000000000000000000001501010101010101011101010101011800000000000000000000000000000000
0000000000000000000000000000000017010101010101010101010101010119000000000000000000000000000000001601010101010101010101011111110101010101010101010101010101010119000000000000000000000000000000001601010101011101011101010101011a00000000000000000000000000000000
0000000000000000000000000000000016010101010101010101010101010118000000000000000000000000000000001501010101010101111111010101010111011101010101010101010101010118000000000000000000000000000000001701010101011101111101010101011800000000000000000000000000000000
000000000000000000000000000000001501010101010101010101010101011a00000000000000000000000000000000170101010101110101110101010101010101011101010101010101010101011a000000000000000000000000000000001601010101011111110101010101011900000000000000000000000000000000
0000000000000000000000000000000016010101010101010101010101010118000000000000000000000000000000001601010101110101010101010101010101010101011101010101010101010119000000000000000000000000000000001501010101010101010101010101011900000000000000000000000000000000
000000000000000000000000000000001701010101010101010101010101011a00000000000000000000000000000000150101011101010101011101010101010101010101010101010101010101011a000000000000000000000000000000001701010101010101010101010101011800000000000000000000000000000000
000000000000000000000000000000001f1b1b1b1b1b1b1b1b1b1b1b1b1b1b1e000000000000000000000000000000001701010111010101010101110101010101010101011101010101010101010118000000000000000000000000000000001f1b1b1b1b1b1b1b1b1b1b1b1b1b1b1e00000000000000000000000000000000
__sfx__
00010000220502505033050300501e15023150344503445033450334503345032450324503145031450314503045030450304502d450194501045010450104502d450274501d4500000000000000000000000000
001005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
